@using Kentico.PageBuilder.Web.Mvc
@using Kentico.Web.Mvc
@using Microsoft.Extensions.Configuration
@using Njh.Kernel.Services
@using Njh.Kernel.Extensions

@inject  ISettingsKeyRepository SettingsKeyRepository;
@{

    var editMode = this.Context.Kentico().PageBuilder().EditMode;
    var analyticsScript = SettingsKeyRepository?.GetAnalyticsScript()??"";

}

<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8" />
    @* TODO check format of page titles per-section vs globally; might be set in metadata *@
    <title>@ViewData["Title"]</title>
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600&family=Open+Sans:ital,wght@0,400;0,600;0,700;0,800;1,400;1,700&display=swap"
        rel="stylesheet" />

    @* Favicon *@
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#03559e">
    <meta name="apple-mobile-web-app-title" content="National Jewish Health">
    <meta name="application-name" content="National Jewish Health">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="theme-color" content="#ffffff">

    @*Dynamically add hashed CSS and JS files*@
    @if (editMode)
    {
        <link href="/Content/InlineEditors/froala-editor-styles.css" rel="stylesheet" />

        <page-builder-styles />
    }
    @RenderSection("styles", required: false)
    <link asp-cache-mappings="@AssetsFileInfo.HashedFiles" rel="preload" as="style" href="/dist/app.css" onload="this.onload=null;this.rel='stylesheet'" />
    <noscript><link asp-cache-mappings="@AssetsFileInfo.HashedFiles" rel="stylesheet" href="/dist/app.css" /></noscript>
    @Html.Raw(analyticsScript)


</head>
<body>
    <a href="#main" class="skip-to-content visually-hidden-focusable">
        Skip to content
    </a>
    <vc:header></vc:header>

    @RenderBody()

    <vc:footer></vc:footer>

    <div class="app-overlay" data-hook="appOverlay"></div>



    @await RenderSectionAsync("Scripts", required: false)
    @if (editMode)
    {

        <page-builder-scripts />
        <script src="~/Content/FormComponents/select2.full.min.js"></script>
        <script src="/Content/InlineEditors/froala-configuration.js"></script>

    }
    <script asp-cache-mappings="@AssetsFileInfo.HashedFiles" src="/dist/app.js" defer></script>

</body>
</html>
